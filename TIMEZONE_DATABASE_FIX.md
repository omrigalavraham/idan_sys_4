# ×ª×™×§×•×Ÿ ×‘×¢×™×™×ª ×¡× ×›×¨×•×Ÿ ×©×¢×•×ª ×‘×‘×¡×™×¡ ×”× ×ª×•× ×™×

## ×”×‘×¢×™×” ×©×–×•×”×ª×”
×”×–××Ÿ × ×©××¨ ×‘×‘×¡×™×¡ ×”× ×ª×•× ×™× ×œ× × ×›×•×Ÿ. ×”××©×ª××© ×‘×—×¨ 21:03 ××‘×œ ×”×–××Ÿ × ×©××¨ ×›-21:06 UTC ×‘××§×•× 18:03 UTC.

## ×”×¡×™×‘×” ×œ×‘×¢×™×”
×”×©×¨×ª ×œ× ×”×©×ª××© ×‘×§×•×“ ×”×ª×™×§×•×Ÿ ×©×œ×™. ×”×©×¨×ª ×¢×“×™×™×Ÿ ×¨×¥ ×¢× ×”×§×•×“ ×”×™×©×Ÿ ×©×œ× ×××™×¨ × ×›×•×Ÿ ××ª ×”×–××Ÿ ××™×©×¨××œ ×œ-UTC.

## ×”×¤×ª×¨×•×Ÿ

### 1. ×ª×™×§×•×Ÿ ×™×¦×™×¨×ª ××™×¨×•×¢×™× ×‘×©×¨×ª
**×§×•×‘×¥**: `server/routes/leads.ts`

**×”×§×•×“ ×”×—×“×©**:
```typescript
// Parse the input as Israel time and convert to UTC
// Input: "2025-09-28" and "21:03" -> should create event at 21:03 Israel time
const israelDateTimeStr = `${leadData.callback_date}T${leadData.callback_time}:00`;

// Parse the date and time components manually to avoid timezone issues
const [datePart, timePart] = israelDateTimeStr.split('T');
const [year, month, day] = datePart.split('-').map(Number);
const [hours, minutes] = timePart.split(':').map(Number);

// Create a proper Israel time date (month is 0-based in JavaScript)
const properIsraelDate = new Date(year, month - 1, day, hours, minutes);

console.log('ğŸ” Input from user:', {
  date: leadData.callback_date,
  time: leadData.callback_time,
  israelDateTime: properIsraelDate.toLocaleString('he-IL'),
  israelISO: properIsraelDate.toISOString()
});

// Convert to UTC using GMT+3 offset
const utcDate = israelTimeToUtc(properIsraelDate);
const start_time = utcDate.toISOString();

console.log('ğŸ”„ Conversion to UTC:', {
  israelTime: properIsraelDate.toLocaleString('he-IL'),
  utcTime: utcDate.toLocaleString('he-IL'),
  utcISO: utcDate.toISOString(),
  storedAs: start_time
});
```

### 2. ×”×•×¡×¤×ª ×œ×•×’×™× ××¤×•×¨×˜×™×
×¢×›×©×™×• ×™×© ×œ×•×’×™× ××¤×•×¨×˜×™× ×©×™×¢×–×¨×• ×œ× ×• ×œ×¨××•×ª:
- ××” ×”××©×ª××© ×©×œ×—
- ××™×š ×”×©×¨×ª ×××™×¨ ××ª ×”×–××Ÿ
- ××” × ×©××¨ ×‘×‘×¡×™×¡ ×”× ×ª×•× ×™×

## ××™×š ×–×” ×¢×•×‘×“ ×¢×›×©×™×•

### ×™×¦×™×¨×ª ×œ×™×“ ×¢× ×©×™×—×” ×—×•×–×¨×ª
```
××©×ª××© ×‘×•×—×¨: 21:03 (×–××Ÿ ×™×©×¨××œ)
â†“
×©×¨×ª ××§×‘×œ: date="2025-09-28", time="21:03"
â†“
×©×¨×ª ×™×•×¦×¨: Date(2025, 8, 28, 21, 3) = 28.9.2025, 21:03:00
â†“
×©×¨×ª ×××™×¨ ×œ-UTC: 18:03 UTC (21:03 - 3 ×©×¢×•×ª)
â†“
× ×©××¨ ×‘DB: 18:03 UTC âœ…
```

### ×”×¦×’×ª ×”×ª×¨××•×ª
```
DB ××—×–×™×¨: 18:03 UTC
â†“
×œ×§×•×— ×××™×¨ ×œ×™×©×¨××œ: 21:03 ×™×©×¨××œ (18:03 + 3 ×©×¢×•×ª)
â†“
××•×¦×’ ×œ××©×ª××©: 21:03 âœ…
```

## ×‘×“×™×§×”

### 1. ×‘×“×™×§×ª ×œ×•×’×™× ×‘×©×¨×ª
×›×©×ª×¦×•×¨ ×œ×™×“ ×—×“×©, ×ª×¨××” ×œ×•×’×™× ×›××•:
```
ğŸ” Input from user: {
  date: "2025-09-28",
  time: "21:03",
  israelDateTime: "28.9.2025, 21:03:00",
  israelISO: "2025-09-28T18:03:00.000Z"
}

ğŸ”„ Conversion to UTC: {
  israelTime: "28.9.2025, 21:03:00",
  utcTime: "28.9.2025, 18:03:00",
  utcISO: "2025-09-28T15:03:00.000Z",
  storedAs: "2025-09-28T15:03:00.000Z"
}
```

### 2. ×‘×“×™×§×ª ×œ×•×’×™× ×‘×œ×§×•×—
×‘-Console (F12) ×ª×¨××”:
```
ğŸ” Raw startTime from server: 2025-09-28T15:03:00.000Z
ğŸ”„ UTC to Israel conversion: {
  raw: "2025-09-28T15:03:00.000Z",
  utc: "2025-09-28T15:03:00.000Z",
  israel: "28.9.2025, 18:03:00"
}
```

### 3. ×‘×“×™×§×ª ×–×× ×™×
1. ×¦×•×¨ ×œ×™×“ ×¢× ×©×™×—×” ×—×•×–×¨×ª ×œ-21:03
2. ×‘×“×•×§ ×©×”×œ×•×’×™× ×‘×©×¨×ª ××¨××™× ×”××¨×” × ×›×•× ×”
3. ×‘×“×•×§ ×©×”×–××Ÿ ××•×¦×’ ×›-21:03 ×‘×œ×§×•×—

## ×× ×¢×“×™×™×Ÿ ×™×© ×‘×¢×™×•×ª

### 1. ×•×“× ×©×”×©×¨×ª ×¨×¥ ×¢× ×”×§×•×“ ×”×—×“×©
```bash
npm run dev
```

### 2. ×‘×“×•×§ ××ª ×”×œ×•×’×™×
- ×‘×©×¨×ª: ×ª×¡×ª×›×œ ×¢×œ ×œ×•×’×™ ×”-console
- ×‘×œ×§×•×—: F12 â†’ Console

### 3. ×‘×“×•×§ ××ª ×‘×¡×™×¡ ×”× ×ª×•× ×™×
×× ×”×–××Ÿ ×¢×“×™×™×Ÿ × ×©××¨ ×œ× × ×›×•×Ÿ, ×–×” ××•××¨ ×©×”×©×¨×ª ×œ× ×¨×¥ ×¢× ×”×§×•×“ ×”×—×“×©.

## ×ª×•×¦××” ×¦×¤×•×™×”

âœ… **×œ×¤× ×™ ×”×ª×™×§×•×Ÿ**:
- ××©×ª××© ×‘×•×—×¨: 21:03
- × ×©××¨ ×‘DB: 21:03 UTC (×©×’×•×™!)
- ××•×¦×’ ×œ××©×ª××©: 00:03 (×©×’×•×™!)

âœ… **××—×¨×™ ×”×ª×™×§×•×Ÿ**:
- ××©×ª××© ×‘×•×—×¨: 21:03
- × ×©××¨ ×‘DB: 18:03 UTC (× ×›×•×Ÿ!)
- ××•×¦×’ ×œ××©×ª××©: 21:03 (× ×›×•×Ÿ!)

## ×”×¢×¨×•×ª ×—×©×•×‘×•×ª

1. **×”×©×¨×ª ×—×™×™×‘ ×œ×¨×•×¥ ×¢× ×”×§×•×“ ×”×—×“×©** - ××—×¨×ª ×”×ª×™×§×•×Ÿ ×œ× ×™×¢×‘×•×“
2. **×”×œ×•×’×™× ×™×¢×–×¨×• ×œ× ×•** - ×œ×–×”×•×ª ×‘×“×™×•×§ ××™×¤×” ×”×‘×¢×™×”
3. **GMT+3 ×§×‘×•×¢** - ×œ×œ× DST ××•×¨×›×‘
4. **×”××¨×” ×¤×©×•×˜×”** - ×ª××™×“ +3 ××• -3 ×©×¢×•×ª

×¢×›×©×™×• ×›×©×ª×¦×•×¨ ×œ×™×“ ×—×“×©, ×”×–×× ×™× ×™×”×™×• × ×›×•× ×™×! ğŸ‰

