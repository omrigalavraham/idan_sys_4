# מסד נתונים - Database

## מבנה הקבצים

### `schema.sql` - הקובץ הראשי
קובץ זה מכיל את כל מבנה מסד הנתונים:
- כל הטבלאות
- כל האינדקסים
- כל הטריגרים
- כל הפונקציות
- כל ההערות והתיעוד

## איך להריץ

### שיטה 1: שורת פקודה
```bash
psql -d your_database_name -f database/schema.sql
```

### שיטה 2: PGAdmin
1. פתח את PGAdmin
2. בחר את מסד הנתונים שלך
3. לחץ על "Query Tool"
4. העתק והדבק את התוכן של `schema.sql`
5. לחץ על "Execute"

### שיטה 3: כלי אחר
העתק את התוכן של `schema.sql` והרץ אותו בכלי הניהול של מסד הנתונים שלך.

## הערות חשובות

- הקובץ משתמש ב-`IF NOT EXISTS` כדי למנוע שגיאות אם הטבלאות כבר קיימות
- כל האינדקסים נוצרים עם `IF NOT EXISTS`
- הטריגרים מעדכנים אוטומטית את שדה `updated_at`
- הקובץ תומך בעברית ובנתונים מורכבים

## טבלאות עיקריות

- `users` - משתמשים במערכת
- `leads` - לידים
- `customers` - לקוחות
- `tasks` - משימות
- `unified_events` - אירועים מאוחדים
- `whatsapp_connections` - חיבורי ווטסאפ למנהלים
- ועוד...

## תמיכה

אם יש בעיות עם מסד הנתונים, בדוק את הלוגים של PostgreSQL או פנה לתמיכה טכנית.
